/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package form;

import DAO.ChuyenMon_Dao;
import DAO.CongNhan_Dao;
import DAO.DiaChi_Dao;
import Enum.GioiTinh;
import Enum.PhuCap;

import java.io.File;
import java.time.LocalDate;
import java.util.Calendar;
import java.util.Date;
import java.util.Vector;

import com.toedter.calendar.JCalendar;

import javax.swing.filechooser.FileFilter;

import entity.ChuyenMon;
import entity.CongNhan;
import entity.DiaChi;

import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.*;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author ACER
 */
public class frm_CongNhan_CapNhat extends javax.swing.JPanel {

    /**
	 * 
	 */
	private static final long serialVersionUID = 9186030863605320361L;

	/**
     * Creates new form frm_NhanVien_CapNhat_
     */
    public frm_CongNhan_CapNhat() {
        initComponents();
        loadDuLieuChoCacModal();
        loadDuLieuTinh();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
    	qlDiaChi = new DiaChi_Dao();
    	qlCongNhan = new CongNhan_Dao();
    	qlChuyenMon =  new ChuyenMon_Dao();
        pnCapNhat = new javax.swing.JPanel();
        pnHinhNen = new HinhNen();
        btnChonAnh = new javax.swing.JButton();
        txtNhapMaTimKiem = new javax.swing.JTextField();
        lblTimKiem = new javax.swing.JLabel();
        scrCongNhan = new javax.swing.JScrollPane();
        tblCongNhan = new javax.swing.JTable();
        pnThongTinCongNhan = new javax.swing.JPanel();
        lblHo = new javax.swing.JLabel();
        txtMa = new javax.swing.JTextField();
        lblMa = new javax.swing.JLabel();
        txtHo = new javax.swing.JTextField();
        lblTen = new javax.swing.JLabel();
        txtTen = new javax.swing.JTextField();
        lblCCCD = new javax.swing.JLabel();
        txtCanCuoc = new javax.swing.JTextField();
        lblNgaySinh = new javax.swing.JLabel();
        lblNgayVaoLam = new javax.swing.JLabel();
        lblSDT = new javax.swing.JLabel();
        txtSoDienThoai = new javax.swing.JTextField();
        lblThanhPho_Tinh = new javax.swing.JLabel();
        cmbThanhPho = new javax.swing.JComboBox<>();
        lblHuyenXa = new javax.swing.JLabel();
        cmbQuanHuyen = new javax.swing.JComboBox<>();
        lblHXa = new javax.swing.JLabel();
        cmbXa = new javax.swing.JComboBox<>();
        lblGioiTinh = new javax.swing.JLabel();
        lblDiaChi = new javax.swing.JLabel();
        txtDiaChi = new javax.swing.JTextField();
        lblChuyenMon = new javax.swing.JLabel();
        cmbChuyenMon = new javax.swing.JComboBox<>();
        cmbGioiTinh = new javax.swing.JComboBox<>();
        btnLamMoi = new javax.swing.JButton();
        btnXacNhan = new javax.swing.JButton();
        btnThoat = new javax.swing.JButton();
        dcsNgaySinh = new com.toedter.calendar.JDateChooser();
        dcsNgayLam = new com.toedter.calendar.JDateChooser();
        tglSua = new javax.swing.JToggleButton();
        btnXoa = new javax.swing.JButton();
        tglThem = new javax.swing.JToggleButton();

        setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));
        setMaximumSize(new java.awt.Dimension(1250, 800));
        setMinimumSize(new java.awt.Dimension(1196, 680));
        setPreferredSize(new java.awt.Dimension(1250, 680));

        pnCapNhat.setBackground(new java.awt.Color(255, 255, 255));
        pnCapNhat.setMaximumSize(new java.awt.Dimension(1250, 800));
        pnCapNhat.setPreferredSize(new java.awt.Dimension(1250, 680));

        pnHinhNen.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));

        javax.swing.GroupLayout pnHinhNenLayout = new javax.swing.GroupLayout(pnHinhNen);
        pnHinhNen.setLayout(pnHinhNenLayout);
        pnHinhNenLayout.setHorizontalGroup(
            pnHinhNenLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 167, Short.MAX_VALUE)
        );
        pnHinhNenLayout.setVerticalGroup(
            pnHinhNenLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 158, Short.MAX_VALUE)
        );

        btnChonAnh.setText("Chọn");
        btnChonAnh.setEnabled(false);
        btnChonAnh.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnChonAnhMouseClicked(evt);
            }
        });
        btnChonAnh.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnChonAnhActionPerformed(evt);
            }
        });

        txtNhapMaTimKiem.setHorizontalAlignment(javax.swing.JTextField.LEFT);
        txtNhapMaTimKiem.setText("Nhập mã");
        txtNhapMaTimKiem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtNhapMaTimKiemActionPerformed(evt);
            }
        });

        lblTimKiem.setText("Tìm kiếm");

        tblCongNhan.setPreferredSize(new java.awt.Dimension(200, 1000));
        scrCongNhan.setViewportView(tblCongNhan);
        tblCongNhan.addMouseListener(new MouseListener() {
			
			@Override
			public void mouseReleased(MouseEvent e) {
				// TODO Auto-generated method stub
				
			}
			
			@Override
			public void mousePressed(MouseEvent e) {
				// TODO Auto-generated method stub
				
			}
			
			@Override
			public void mouseExited(MouseEvent e) {
				
			}
			
			@Override
			public void mouseEntered(MouseEvent e) {
				
			}
			
			@Override
			public void mouseClicked(MouseEvent e) {
				int dongLuaChon = tblCongNhan.getSelectedRow();
				if(dongLuaChon == -1) {
					return;
				}else {
					datDuLieuNhanVienVaoForm(dongLuaChon);
				}
			}
		});

        pnThongTinCongNhan.setBackground(new java.awt.Color(255, 255, 255));
        pnThongTinCongNhan.setBorder(javax.swing.BorderFactory.createTitledBorder(new javax.swing.border.LineBorder(new java.awt.Color(255, 153, 0), 1, true), "Thông Tin Công Nhân", javax.swing.border.TitledBorder.CENTER, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe UI", 1, 12), new java.awt.Color(255, 153, 0))); // NOI18N

        lblHo.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblHo.setText("Họ");
        lblHo.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        txtMa.setEditable(false);
        txtMa.setBackground(new java.awt.Color(255, 204, 51));
        txtMa.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        txtMa.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtMa.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(255, 153, 0), 1, true));
        txtMa.setFocusable(false);
        txtMa.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtMaActionPerformed(evt);
            }
        });

        lblMa.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblMa.setText("Mã Công Nhân");
        lblMa.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        txtHo.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        txtHo.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtHo.setText("Nhập Họ");
        txtHo.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(255, 153, 0), 1, true));
        txtHo.setEnabled(false);
        txtHo.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtHoFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtHoFocusLost(evt);
            }
        });
        txtHo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtHoActionPerformed(evt);
            }
        });

        lblTen.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblTen.setText("Tên");
        lblTen.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        txtTen.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        txtTen.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtTen.setText("Nhập Tên");
        txtTen.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(255, 153, 0), 1, true));
        txtTen.setEnabled(false);
        txtTen.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtTenFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtTenFocusLost(evt);
            }
        });
        txtTen.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtTenActionPerformed(evt);
            }
        });

        lblCCCD.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblCCCD.setText("CCCD");
        lblCCCD.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        txtCanCuoc.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        txtCanCuoc.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtCanCuoc.setText("Căn cước");
        txtCanCuoc.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(255, 153, 0), 1, true));
        txtCanCuoc.setEnabled(false);
        txtCanCuoc.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtCanCuocFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtCanCuocFocusLost(evt);
            }
        });
        txtCanCuoc.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtCanCuocActionPerformed(evt);
            }
        });

        lblNgaySinh.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblNgaySinh.setText("Ngày Sinh");
        lblNgaySinh.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        lblNgayVaoLam.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblNgayVaoLam.setText("Ngày vào");
        lblNgayVaoLam.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        lblSDT.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblSDT.setText("SDT");
        lblSDT.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        txtSoDienThoai.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtSoDienThoai.setText("Số điện thoại");
        txtSoDienThoai.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(255, 153, 0), 1, true));
        txtSoDienThoai.setEnabled(false);
        txtSoDienThoai.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtSoDienThoaiFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtSoDienThoaiFocusLost(evt);
            }
        });
        txtSoDienThoai.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtSoDienThoaiActionPerformed(evt);
            }
        });

        lblThanhPho_Tinh.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblThanhPho_Tinh.setText("Thành Phố/Tỉnh");
        lblThanhPho_Tinh.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        cmbThanhPho.setMaximumRowCount(64);
        cmbThanhPho.setToolTipText("");
        cmbThanhPho.setBorder(null);
        cmbThanhPho.setEnabled(false);
        cmbThanhPho.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmbThanhPhoActionPerformed(evt);
            }
        });

        lblHuyenXa.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblHuyenXa.setText("Huyện/Quận");
        lblHuyenXa.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        cmbQuanHuyen.setMaximumRowCount(64);
        cmbQuanHuyen.setToolTipText("");
        cmbQuanHuyen.setBorder(null);
        cmbQuanHuyen.setEnabled(false);
        cmbQuanHuyen.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmbQuanHuyenActionPerformed(evt);
            }
        });

        lblHXa.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblHXa.setText("Xã");
        lblHXa.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        cmbXa.setEnabled(false);

        lblGioiTinh.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblGioiTinh.setText("Giới tính");
        lblGioiTinh.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        lblDiaChi.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblDiaChi.setText("Địa Chỉ Cụ Thể");
        lblDiaChi.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(255, 153, 0)));

        txtDiaChi.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtDiaChi.setText("Địa chỉ");
        txtDiaChi.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(255, 153, 0)));
        txtDiaChi.setEnabled(false);
        txtDiaChi.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtDiaChiFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtDiaChiFocusLost(evt);
            }
        });

        lblChuyenMon.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblChuyenMon.setText("Chuyên Môn");
        lblChuyenMon.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(204, 153, 0), 1, true));

        cmbChuyenMon.setMaximumRowCount(64);
        cmbChuyenMon.setToolTipText("");
        cmbChuyenMon.setBorder(null);
        cmbChuyenMon.setEnabled(false);
        cmbChuyenMon.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmbChuyenMonActionPerformed(evt);
            }
        });

        cmbGioiTinh.setEnabled(false);
        cmbGioiTinh.setFocusCycleRoot(true);

        btnLamMoi.setIcon(new javax.swing.ImageIcon("C:\\Users\\ACER\\OneDrive - Industrial University of HoChiMinh City\\Desktop\\PTUD\\PTUD_APP\\QLyLuongSP\\img\\icons\\refresh-arrow.png")); // NOI18N
        btnLamMoi.setText("Làm Mới");
        btnLamMoi.setEnabled(false);
        btnLamMoi.addActionListener(new ActionListener() {
			
			@Override
			public void actionPerformed(ActionEvent e) {
				if(tglThem.isSelected()) {
					lamMoiFormChucNangThem();
				}else {
					lamMoiFormChucNangSua();
				}
			}
		});

        btnXacNhan.setIcon(new javax.swing.ImageIcon("C:\\Users\\ACER\\OneDrive - Industrial University of HoChiMinh City\\Desktop\\PTUD\\PTUD_APP\\QLyLuongSP\\img\\icons\\check-mark.png")); // NOI18N
        btnXacNhan.setText("Xác Nhận");
        btnXacNhan.setEnabled(false);
        btnXacNhan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnXacNhanActionPerformed(evt);
            }
        });

        btnThoat.setIcon(new javax.swing.ImageIcon("C:\\Users\\ACER\\OneDrive - Industrial University of HoChiMinh City\\Desktop\\PTUD\\PTUD_APP\\QLyLuongSP\\img\\icons\\house.png")); // NOI18N
        btnThoat.setText("Thoát");
        btnThoat.setEnabled(false);
        btnThoat.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThoatActionPerformed(evt);
            }
        });

        dcsNgaySinh.setEnabled(false);

        dcsNgayLam.setEnabled(false);

        javax.swing.GroupLayout pnThongTinCongNhanLayout = new javax.swing.GroupLayout(pnThongTinCongNhan);
        pnThongTinCongNhan.setLayout(pnThongTinCongNhanLayout);
        pnThongTinCongNhanLayout.setHorizontalGroup(
            pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                                .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                                        .addComponent(lblHo, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(txtHo))
                                    .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                                        .addComponent(lblNgaySinh, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(dcsNgaySinh, javax.swing.GroupLayout.PREFERRED_SIZE, 147, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(57, 57, 57)
                                .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                                        .addComponent(lblGioiTinh, javax.swing.GroupLayout.DEFAULT_SIZE, 99, Short.MAX_VALUE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(cmbGioiTinh, javax.swing.GroupLayout.PREFERRED_SIZE, 157, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, pnThongTinCongNhanLayout.createSequentialGroup()
                                        .addComponent(lblTen, javax.swing.GroupLayout.PREFERRED_SIZE, 102, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(txtTen))
                                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, pnThongTinCongNhanLayout.createSequentialGroup()
                                        .addComponent(lblNgayVaoLam, javax.swing.GroupLayout.PREFERRED_SIZE, 99, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(dcsNgayLam, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                            .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                                .addComponent(lblThanhPho_Tinh, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(cmbThanhPho, javax.swing.GroupLayout.PREFERRED_SIZE, 147, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                        .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                                .addGap(308, 308, 308)
                                .addComponent(lblHuyenXa, javax.swing.GroupLayout.PREFERRED_SIZE, 99, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnThongTinCongNhanLayout.createSequentialGroup()
                                .addContainerGap()
                                .addComponent(btnLamMoi)
                                .addGap(101, 101, 101)))
                        .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(btnXacNhan)
                            .addComponent(cmbQuanHuyen, 0, 160, Short.MAX_VALUE))))
                .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                        .addGap(66, 66, 66)
                        .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblHXa, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                                .addComponent(lblCCCD, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtCanCuoc, javax.swing.GroupLayout.PREFERRED_SIZE, 152, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                                .addComponent(lblSDT, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtSoDienThoai, javax.swing.GroupLayout.PREFERRED_SIZE, 152, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                        .addGap(34, 34, 34)
                        .addComponent(btnThoat, javax.swing.GroupLayout.PREFERRED_SIZE, 96, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                    .addContainerGap()
                    .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                            .addComponent(lblMa, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(txtMa, javax.swing.GroupLayout.DEFAULT_SIZE, 149, Short.MAX_VALUE))
                        .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                            .addComponent(lblDiaChi, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(txtDiaChi, javax.swing.GroupLayout.PREFERRED_SIZE, 149, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGap(55, 55, 55)
                    .addComponent(lblChuyenMon, javax.swing.GroupLayout.PREFERRED_SIZE, 97, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 333, Short.MAX_VALUE)
                            .addComponent(cmbXa, javax.swing.GroupLayout.PREFERRED_SIZE, 152, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addContainerGap())
                        .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                            .addGap(9, 9, 9)
                            .addComponent(cmbChuyenMon, javax.swing.GroupLayout.PREFERRED_SIZE, 157, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addContainerGap(325, Short.MAX_VALUE)))))
        );
        pnThongTinCongNhanLayout.setVerticalGroup(
            pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(lblGioiTinh, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(cmbGioiTinh, javax.swing.GroupLayout.DEFAULT_SIZE, 32, Short.MAX_VALUE))
                .addGap(18, 18, 18)
                .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblHo, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtHo, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblTen, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtTen, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblCCCD, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtCanCuoc, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                        .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(lblNgayVaoLam, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(lblNgaySinh, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(lblSDT, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(txtSoDienThoai, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(dcsNgayLam, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(lblHuyenXa, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(cmbQuanHuyen, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(lblHXa, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(cmbThanhPho)
                            .addComponent(lblThanhPho_Tinh, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 85, Short.MAX_VALUE)
                        .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(btnXacNhan, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(btnLamMoi, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(btnThoat, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                        .addComponent(dcsNgaySinh, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
            .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(pnThongTinCongNhanLayout.createSequentialGroup()
                    .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(lblMa, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(txtMa, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGap(119, 119, 119)
                    .addComponent(cmbXa, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(17, 17, 17)
                    .addGroup(pnThongTinCongNhanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(lblDiaChi, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(txtDiaChi, javax.swing.GroupLayout.PREFERRED_SIZE, 33, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(lblChuyenMon, javax.swing.GroupLayout.PREFERRED_SIZE, 33, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(cmbChuyenMon, javax.swing.GroupLayout.PREFERRED_SIZE, 33, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addContainerGap(52, Short.MAX_VALUE)))
        );

        tglSua.setIcon(new javax.swing.ImageIcon("C:\\Users\\ACER\\OneDrive - Industrial University of HoChiMinh City\\Desktop\\PTUD\\PTUD_APP\\QLyLuongSP\\img\\icons\\edit.png")); // NOI18N
        tglSua.setText("Sửa");
        tglSua.addActionListener(new ActionListener() {
			
			@Override
			public void actionPerformed(ActionEvent e) {
				tglSuaActionPerform(e);
			}
		});
        btnXoa.setIcon(new javax.swing.ImageIcon("C:\\Users\\ACER\\OneDrive - Industrial University of HoChiMinh City\\Desktop\\PTUD\\PTUD_APP\\QLyLuongSP\\img\\icons\\bin.png")); // NOI18N
        btnXoa.setText("Hủy chọn trên bảng");
        btnXoa.addActionListener(new ActionListener() {
			
			@Override
			public void actionPerformed(ActionEvent e) {
				tblCongNhan.clearSelection();
				thietLapLaiForm();
			}
		});

        tglThem.setIcon(new javax.swing.ImageIcon("C:\\Users\\ACER\\OneDrive - Industrial University of HoChiMinh City\\Desktop\\PTUD\\PTUD_APP\\QLyLuongSP\\img\\icons\\plus.png")); // NOI18N
        tglThem.setText("Thêm");
        tglThem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tglThemActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout pnCapNhatLayout = new javax.swing.GroupLayout(pnCapNhat);
        pnCapNhat.setLayout(pnCapNhatLayout);
        pnCapNhatLayout.setHorizontalGroup(
            pnCapNhatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnCapNhatLayout.createSequentialGroup()
                .addGap(40, 40, 40)
                .addComponent(txtNhapMaTimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, 126, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(lblTimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, 83, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(tglThem)
                .addGap(54, 54, 54)
                .addComponent(tglSua)
                .addGap(49, 49, 49)
                .addComponent(btnXoa)
                .addGap(84, 84, 84))
            .addComponent(scrCongNhan)
            .addGroup(pnCapNhatLayout.createSequentialGroup()
                .addGroup(pnCapNhatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnCapNhatLayout.createSequentialGroup()
                        .addGap(50, 50, 50)
                        .addComponent(pnHinhNen, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(pnCapNhatLayout.createSequentialGroup()
                        .addGap(95, 95, 95)
                        .addComponent(btnChonAnh)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 53, Short.MAX_VALUE)
                .addComponent(pnThongTinCongNhan, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(70, 70, 70))
        );
        pnCapNhatLayout.setVerticalGroup(
            pnCapNhatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnCapNhatLayout.createSequentialGroup()
                .addGroup(pnCapNhatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnCapNhatLayout.createSequentialGroup()
                        .addGap(45, 45, 45)
                        .addComponent(pnHinhNen, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(btnChonAnh)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 107, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnCapNhatLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(pnThongTinCongNhan, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGap(18, 18, 18)))
                .addGroup(pnCapNhatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(pnCapNhatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(lblTimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(txtNhapMaTimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(pnCapNhatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(pnCapNhatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(btnXoa, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(tglThem, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addComponent(tglSua, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(18, 18, 18)
                .addComponent(scrCongNhan, javax.swing.GroupLayout.PREFERRED_SIZE, 272, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnCapNhat, javax.swing.GroupLayout.DEFAULT_SIZE, 1248, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnCapNhat, javax.swing.GroupLayout.DEFAULT_SIZE, 678, Short.MAX_VALUE)
        );
        
        
        tblCongNhan.addMouseListener(new MouseListener() {
			
			@Override
			public void mouseReleased(MouseEvent e) {
				// TODO Auto-generated method stub
				
			}
			
			@Override
			public void mousePressed(MouseEvent e) {
				// TODO Auto-generated method stub
				
			}
			
			@Override
			public void mouseExited(MouseEvent e) {
				// TODO Auto-generated method stub
				
			}
			
			@Override
			public void mouseEntered(MouseEvent e) {
				// TODO Auto-generated method stub
				
			}
			
			@Override
			public void mouseClicked(MouseEvent e) {
				
			}
		});
    }// </editor-fold>//GEN-END:initComponents

    protected void tglSuaActionPerform(ActionEvent e) {
		if(tglSua.isSelected()) {
			int row = tblCongNhan.getSelectedRow();
			if(row == -1) {
				JOptionPane.showMessageDialog(null, "Chưa chọn công nhân cần sửa");
				tglSua.setSelected(false);
			}else {
				moFormNhapDuLieu();
				datDuLieuNhanVienVaoForm(row);
			}
		}
	}

	protected void btnXacNhanActionPerformed(ActionEvent evt) {
    	try {
			if(tglThem.isSelected()) {
				kiemTraDuLieuCongNhan();
		        CongNhan cn = taoCongNhan();
		        qlCongNhan.themCongNhan(cn);
		        loadDuLieuCongNhanRaBang(modal);
		        thietLapLaiForm();
		        dongFormNhapDuLieu();		
			}else if(tglSua.isSelected()) {
				kiemTraDuLieuCongNhan();
				CongNhan cn = taoCongNhan();
				if(qlCongNhan.suaCongNhan(cn)) {
					JOptionPane.showMessageDialog(null, "Sửa Công Nhân Thành Công");
					loadDuLieuCongNhanRaBang(modal);
					thietLapLaiForm();
			        dongFormNhapDuLieu();
			        tblCongNhan.setEnabled(true);
				}else {
					JOptionPane.showMessageDialog(null, "Sửa Nhân Viên Thất Bại");
				}			
			}
		} catch (Exception e) {
			JOptionPane.showMessageDialog(this, e.getMessage());
		}
	}

	private CongNhan taoCongNhan() {
    	String ma = txtMa.getText().trim();
        String ho = txtHo.getText().trim();
        String ten = txtTen.getText().trim();
        GioiTinh gioiTinh = (GioiTinh) cmbGioiTinh.getSelectedItem();
        String cccd = txtCanCuoc.getText().trim();
        Date ngaySinh = dcsNgaySinh.getDate();
        Date ngayVaoLam = dcsNgayLam.getDate();
        String sdt = txtSoDienThoai.getText().trim();
        String thanhPho_Tinh = (String) cmbThanhPho.getSelectedItem();
        String quanHuyen = (String) cmbQuanHuyen.getSelectedItem();
        String thiXa = (String) cmbXa.getSelectedItem();
        String diaChiCuThe = txtDiaChi.getText().trim();
        DiaChi diaChi = qlDiaChi.taoDiaChiVaTraDiaChi(diaChiCuThe, thanhPho_Tinh, quanHuyen, thiXa);
        ChuyenMon chuyenMon = (ChuyenMon) cmbChuyenMon.getSelectedItem();
        CongNhan cn = new CongNhan(ma, ho, ten, sdt, ngaySinh, ngayVaoLam, cccd, diaChi, PhuCap.MUC_2, gioiTinh, anhNguoiDung, false, chuyenMon);
        return cn;
    }
    

	private void btnChonAnhMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnChonAnhMouseClicked
        chonAnh();
    }//GEN-LAST:event_btnChonAnhMouseClicked

    private void btnChonAnhActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnChonAnhActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_btnChonAnhActionPerformed

    private void txtMaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtMaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtMaActionPerformed

    private void txtHoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtHoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtHoActionPerformed

    private void txtTenActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtTenActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtTenActionPerformed

    private void txtCanCuocActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtCanCuocActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtCanCuocActionPerformed

    private void txtSoDienThoaiActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtSoDienThoaiActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtSoDienThoaiActionPerformed

    private void cmbThanhPhoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmbThanhPhoActionPerformed
    	capNhatDuLIeuQuanHuyen();
    }//GEN-LAST:event_cmbThanhPhoActionPerformed

    private void cmbQuanHuyenActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmbQuanHuyenActionPerformed
        capNhatDuLieuThiXa();
    }//GEN-LAST:event_cmbQuanHuyenActionPerformed

    private void txtNhapMaTimKiemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtNhapMaTimKiemActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtNhapMaTimKiemActionPerformed

    private void cmbChuyenMonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmbChuyenMonActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cmbChuyenMonActionPerformed

    private void tglThemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tglThemActionPerformed
        // TODO add your handling code here:
        if (tglThem.isSelected()) {
        	tblCongNhan.clearSelection();
        	lamMoiFormChucNangThem();
            moFormNhapDuLieu();
            loadDuLieuDiaChi();
            layMaCongNhanMoi();
            tglSua.setEnabled(false);
            btnXoa.setEnabled(false);
            tblCongNhan.setEnabled(false);
        } else {
            dongFormNhapDuLieu();
            lamMoiFormChucNangThem();
            tglSua.setEnabled(true);
            btnXoa.setEnabled(true);
            tblCongNhan.setEnabled(true);
        }

    }//GEN-LAST:event_tglThemActionPerformed

    private void layMaCongNhanMoi() {
		String maNhanVienMoi = CongNhan_Dao.layMaCongNhanTiepTheo();
		txtMa.setText(maNhanVienMoi);
	}

	private void btnThoatActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThoatActionPerformed
        int lc =JOptionPane.showConfirmDialog(null, "Chắc chắn thoát chứ ?", "Chú Ý!", JOptionPane.YES_NO_OPTION);
        if(lc == JOptionPane.YES_OPTION) {
        	tglThem.setSelected(false);
            tglSua.setSelected(false);
            tglThem.setEnabled(true);
            tglSua.setEnabled(true);
            btnXoa.setEnabled(true);
            tblCongNhan.setEnabled(true);
            dongFormNhapDuLieu();
            thietLapLaiForm();      
        }
    }//GEN-LAST:event_btnThoatActionPerformed

    private void txtHoFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtHoFocusGained
        // TODO add your handling code here:
        String duLieu = txtHo.getText().trim();
        if (duLieu.equalsIgnoreCase("Nhập Họ")) {
            txtHo.setText("");
            txtHo.setForeground(Color.BLACK);
        }
    }//GEN-LAST:event_txtHoFocusGained

    private void txtHoFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtHoFocusLost
        // TODO add your handling code here:
        if (txtHo.getText().isEmpty()) {
            txtHo.setText("Nhập Họ");
        }
    }//GEN-LAST:event_txtHoFocusLost

    private void txtTenFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtTenFocusGained
        // TODO add your handling code here:
        String duLieu = txtTen.getText().trim();
        if (duLieu.equalsIgnoreCase("Nhập Tên")) {
            txtTen.setText("");
            txtTen.setForeground(Color.BLACK);
        }
    }//GEN-LAST:event_txtTenFocusGained

    private void txtTenFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtTenFocusLost
        // TODO add your handling code here:
        if (txtTen.getText().isEmpty()) {
            txtTen.setText("Nhập Tên");
        }
    }//GEN-LAST:event_txtTenFocusLost

    private void txtCanCuocFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtCanCuocFocusGained
        // TODO add your handling code here:
        String duLieu = txtCanCuoc.getText().trim();
        if (duLieu.equalsIgnoreCase("Căn cước")) {
            txtCanCuoc.setText("");
            txtCanCuoc.setForeground(Color.BLACK);
        }
    }//GEN-LAST:event_txtCanCuocFocusGained

    private void txtCanCuocFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtCanCuocFocusLost
        // TODO add your handling code here:
        if (txtCanCuoc.getText().isEmpty()) {
            txtCanCuoc.setText("Căn cước");
        }
    }//GEN-LAST:event_txtCanCuocFocusLost

    private void txtSoDienThoaiFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtSoDienThoaiFocusGained
        // TODO add your handling code here:
        String duLieu = txtSoDienThoai.getText().trim();
        if (duLieu.equalsIgnoreCase("Số điện thoại")) {
            txtSoDienThoai.setText("");
            txtSoDienThoai.setForeground(Color.BLACK);
        }
    }//GEN-LAST:event_txtSoDienThoaiFocusGained

    private void txtSoDienThoaiFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtSoDienThoaiFocusLost
        // TODO add your handling code here:
        if (txtSoDienThoai.getText().isEmpty()) {
            txtSoDienThoai.setText("Số điện thoại");
        }
    }//GEN-LAST:event_txtSoDienThoaiFocusLost

    private void txtDiaChiFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtDiaChiFocusGained
        // TODO add your handling code here:
        String duLieu = txtDiaChi.getText().trim();
        if (duLieu.equalsIgnoreCase("Địa chỉ")) {
            txtDiaChi.setText("");
            txtDiaChi.setForeground(Color.BLACK);
        }
    }//GEN-LAST:event_txtDiaChiFocusGained

    private void txtDiaChiFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtDiaChiFocusLost
        // TODO add your handling code here:
        if (txtDiaChi.getText().isEmpty()) {
            txtDiaChi.setText("Địa chỉ");
        }
    }//GEN-LAST:event_txtDiaChiFocusLost

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private String anhNguoiDung = "";
    private DefaultTableModel modal;
    private DiaChi_Dao qlDiaChi;
    private CongNhan_Dao qlCongNhan;
    private ChuyenMon_Dao qlChuyenMon;
    private javax.swing.JButton btnChonAnh;
    private javax.swing.JButton btnLamMoi;
    private javax.swing.JButton btnThoat;
    private javax.swing.JButton btnXacNhan;
    private javax.swing.JButton btnXoa;
    private javax.swing.JComboBox<ChuyenMon> cmbChuyenMon;
    private javax.swing.JComboBox<GioiTinh> cmbGioiTinh;
    private javax.swing.JComboBox<String> cmbQuanHuyen;
    private javax.swing.JComboBox<String> cmbThanhPho;
    private javax.swing.JComboBox<String> cmbXa;
    private com.toedter.calendar.JDateChooser dcsNgayLam;
    private com.toedter.calendar.JDateChooser dcsNgaySinh;
    private javax.swing.JLabel lblCCCD;
    private javax.swing.JLabel lblChuyenMon;
    private javax.swing.JLabel lblDiaChi;
    private javax.swing.JLabel lblGioiTinh;
    private javax.swing.JLabel lblHXa;
    private javax.swing.JLabel lblHo;
    private javax.swing.JLabel lblHuyenXa;
    private javax.swing.JLabel lblMa;
    private javax.swing.JLabel lblNgaySinh;
    private javax.swing.JLabel lblNgayVaoLam;
    private javax.swing.JLabel lblSDT;
    private javax.swing.JLabel lblTen;
    private javax.swing.JLabel lblThanhPho_Tinh;
    private javax.swing.JLabel lblTimKiem;
    private javax.swing.JPanel pnCapNhat;
    private HinhNen pnHinhNen;
    private javax.swing.JPanel pnThongTinCongNhan;
    private javax.swing.JScrollPane scrCongNhan;
    private javax.swing.JTable tblCongNhan;
    private javax.swing.JToggleButton tglSua;
    private javax.swing.JToggleButton tglThem;
    private javax.swing.JTextField txtCanCuoc;
    private javax.swing.JTextField txtDiaChi;
    private javax.swing.JTextField txtHo;
    private javax.swing.JTextField txtMa;
    private javax.swing.JTextField txtNhapMaTimKiem;
    private javax.swing.JTextField txtSoDienThoai;
    private javax.swing.JTextField txtTen;
    // End of variables declaration//GEN-END:variables

    private void moFormNhapDuLieu() {
        btnChonAnh.setEnabled(true);
        tglSua.setEnabled(false);
        txtMa.setText("");cmbGioiTinh.setEnabled(true);
            txtHo.setEnabled(true);
            txtTen.setEnabled(true);
            txtCanCuoc.setEnabled(true);
            dcsNgaySinh.setEnabled(true);
            dcsNgayLam.setEnabled(true);
            txtSoDienThoai.setEnabled(true);
            cmbThanhPho.setEnabled(true);
            //
            cmbQuanHuyen.setEnabled(true);
            cmbXa.setEnabled(true);
            txtDiaChi.setEnabled(true);
            cmbChuyenMon.setEnabled(true);
            btnXacNhan.setEnabled(true);
            btnLamMoi.setEnabled(true);
            btnThoat.setEnabled(true);
    }

    private void dongFormNhapDuLieu() {
        txtMa.setText("");
        cmbGioiTinh.setEnabled(false);
        tglSua.setEnabled(true);
        txtHo.setEnabled(false);
        txtTen.setEnabled(false);
        txtCanCuoc.setEnabled(false);
        dcsNgaySinh.setEnabled(false);
        dcsNgayLam.setEnabled(false);
        txtSoDienThoai.setEnabled(false);
        cmbThanhPho.setEnabled(false);
        //
        cmbQuanHuyen.setEnabled(false);
        cmbXa.setEnabled(false);
        txtDiaChi.setEnabled(false);
        cmbChuyenMon.setEnabled(false);
        tglThem.setSelected(false);
        tglSua.setSelected(false);   
        btnLamMoi.setEnabled(false);
        btnXacNhan.setEnabled(false);
        btnThoat.setEnabled(false);
    }
    
    private void loadDuLieuChoGioiTinh() {
    	cmbGioiTinh.addItem(GioiTinh.NAM);
    	cmbGioiTinh.addItem(GioiTinh.NU);
    	cmbGioiTinh.addItem(GioiTinh.KHAC);
    }
    
    protected void capNhatDuLIeuQuanHuyen() {
        String TinhThanhPhpDaChon = (String) cmbThanhPho.getSelectedItem();
        cmbQuanHuyen.removeAllItems();
        if(TinhThanhPhpDaChon == null || TinhThanhPhpDaChon.equalsIgnoreCase("Bất Kì")) {
            return;
        }
        String quanHuyen[] = qlDiaChi.layQuanHuyenDuaTheoTinhThanhPho(TinhThanhPhpDaChon.trim());
        for(int i=0;i<quanHuyen.length;i++)
            cmbQuanHuyen.addItem(quanHuyen[i]);
    }
    
    protected void capNhatDuLieuThiXa() {
        try {
            String TinhThanhPhpDaChon = (String) cmbThanhPho.getSelectedItem();
            String quanHuyenDaChon = (String) cmbQuanHuyen.getSelectedItem();
            cmbXa.removeAllItems();
            if(TinhThanhPhpDaChon == null || TinhThanhPhpDaChon.equalsIgnoreCase("Bất Kì") || quanHuyenDaChon == null || quanHuyenDaChon.equalsIgnoreCase("Bất Kì"))
                return;
            String thiXa[] = qlDiaChi.layPhuongXaDuaTrenQuanHuyenVaTinhThanhPho(TinhThanhPhpDaChon.trim(), quanHuyenDaChon.trim());
            for(int i=0;i<thiXa.length;i++)
                cmbXa.addItem(thiXa[i]);
        } catch (Exception e) {
            // TODO: handle 
            e.printStackTrace();
		}
	}

    private void loadDuLieuDiaChi() {
        loadDuLieuTinh();
        capNhatDuLIeuQuanHuyen();
        capNhatDuLieuThiXa();
    }

    private void loadDuLieuTinh() {
        String quanHuyen[] = qlDiaChi.layDanhSachTinhThanhPho();
        cmbThanhPho.removeAllItems();
        for(int i=0;i<quanHuyen.length;i++)
            cmbThanhPho.addItem(quanHuyen[i]);
    }
    
    private void loadDuLieuChuyenMon(){
        cmbChuyenMon.removeAll();
        for (ChuyenMon chuyenMon : qlChuyenMon.getDs()) {
            cmbChuyenMon.addItem(chuyenMon);
        }
    }
    
    private void bangDuLieuCongNhan(){
    	String column[]= {"STT", "Mã Công Nhân", "Họ", "Tên", "SDT", "Căn Cước", "DiaChi", "Giới Tính", "Chuyên Môn", "Trạng Thái"};
        modal = new DefaultTableModel(column, 0) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class,java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false,  false,false, false, false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        };
        loadDuLieuNhanVienRaBang(modal, qlCongNhan.getDs().toArray(new CongNhan[0]));
        tblCongNhan.setModel(modal); 
    }
    
    private void loadDuLieuNhanVienRaBang(DefaultTableModel modal, CongNhan[] mangCongNhan) {
    	int i=1;
    	tblCongNhan.removeAll();
    	modal.setRowCount(0);
        for (CongNhan cn : mangCongNhan) {
        	Vector<String> data = new  Vector<>();
        	data.add(i+"");
        	i++;
        	data.addAll(cn.duLieuFormCapNhat());
        	modal.addRow(data);
        }
	}
    
    private void loadDuLieuCongNhanRaBang(DefaultTableModel modal) {
    	int i=1;
    	tblCongNhan.removeAll();
    	modal.setRowCount(0);
        for (CongNhan nv : qlCongNhan.getDs()) {
        	Vector<String> data = new  Vector<>();
        	data.add(i+"");
        	i++;
        	data.addAll(nv.duLieuFormCapNhat());
        	modal.addRow(data);
        }
	}
    
    
//    private void dongForm() {
//    	txtMa.setText("");
//    	cmbChuyenMon.setSelectedIndex(0);
//    	txtHo.setText("Nhập Họ");
//    	txtTen.setText("Nhập Tên");
//    	txtCanCuoc.setText("Căn cước");
//    	txtSoDienThoai.setText("Số điện thoại");
//    	dcsNgaySinh.setDate(null);
//    	dcsNgayLam.setDate(null);
//    	cmbGioiTinh.setSelectedIndex(0);
//    	cmbThanhPho.setSelectedIndex(0);
//    	txtDiaChi.setText("Địa chỉ");
//    }
    
    private void lamMoiFormChucNangThem() {
    	cmbChuyenMon.setSelectedIndex(0);
    	txtHo.setText("Nhập Họ");
    	txtTen.setText("Nhập Tên");
    	txtCanCuoc.setText("Căn cước");
    	txtSoDienThoai.setText("Số điện thoại");
    	dcsNgaySinh.setDate(null);
    	dcsNgayLam.setDate(null);
    	cmbGioiTinh.setSelectedIndex(0);
    	cmbThanhPho.setSelectedIndex(0);
    	txtDiaChi.setText("Địa chỉ");
    	pnHinhNen.setNewBackground("img/profile.png");
    }
    
    private void lamMoiFormChucNangSua() {
    	int row = tblCongNhan.getSelectedRow();
    	datDuLieuNhanVienVaoForm(row);
    }
    
    private void chonAnh() {
        JFileChooser fchChonAnh = new JFileChooser();
        fchChonAnh.setFileFilter(new FileFilter() {
            @Override
            public boolean accept(File file) {
                if (file.isDirectory()) {
                    return true;
                }
                String fileName = file.getName().toLowerCase();
                return fileName.endsWith(".jpg") || fileName.endsWith(".png") || fileName.endsWith(".gif");
            }

            @Override
            public String getDescription() {
                return "Image Files (.jpg, .png, .gif)";
            }
        });
        int result = fchChonAnh.showOpenDialog(null);

        if(result == JFileChooser.APPROVE_OPTION){
            anhNguoiDung = fchChonAnh.getSelectedFile().getAbsolutePath();
            pnHinhNen.setNewBackground(anhNguoiDung);
        }else{
            return;
        }       
    }
    
    public void loadDuLieuChoCacModal(){
        loadDuLieuChuyenMon();
        loadDuLieuChoGioiTinh();
        bangDuLieuCongNhan();
    }
    
    private void kiemTraDuLieuCongNhan() throws Exception {
    	String ho = txtHo.getText().trim();
        if(ho.equalsIgnoreCase("Nhập Họ") || ho.isEmpty()){
        	throw new Exception("Họ không được rỗng");
        }else if(!ho.matches("^[\\p{L}\\p{Mn}\\p{Mc}\\s]+$")) {
        	throw new Exception("Họ không hợp lệ");
        }
        
        String ten = txtTen.getText();
        if(ten.equalsIgnoreCase("Nhập Tên") || ten.isEmpty() ){
            throw new Exception("Tên không được rỗng");
        }else if(!ten.matches("^[\\p{L}\\p{Mn}\\p{Mc}\\s]+$")) {
        	throw new Exception("Tên không hợp lệ");
        }
        
        String cccd = txtCanCuoc.getText().trim();
        if(cccd.isEmpty()){
            throw new Exception("Căn cước công dân không được rỗng");
        }else if(cccd.length()<11|| !cccd.matches("[0-9]{11}")) {
            throw new Exception("Căn cước công dân không hợp lệ");     	
        }
        
        //nam hien tai
        LocalDate currentDate = LocalDate.now();
        int namHienTai = currentDate.getYear();
        //nam ngay Sinh
        Date ngaySinh = dcsNgaySinh.getDate();
        if(ngaySinh == null) {
        	throw new Exception("Ngày sinh không được rỗng");
        }
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(ngaySinh);
        int namNgaySinh = calendar.get(Calendar.YEAR);
        if(namHienTai - namNgaySinh <18){
            throw new Exception("Tuỏi nhân viên phải từ 18 tới 60");
        }
        
        Date ngayVaoLam = dcsNgayLam.getDate();
        if(ngayVaoLam == null) {
        	throw new Exception("Ngày vào làm không được rỗng");
        }
        
        String tinhThanhPho = (String) cmbThanhPho.getSelectedItem();
        if(tinhThanhPho== null) {
        	throw new Exception("Chưa chọn tỉnh thành phố");
        }
        
        String quanHuyen = (String) cmbQuanHuyen.getSelectedItem();
        if(quanHuyen.trim().isEmpty() || quanHuyen== null) {
        	throw new Exception("Chưa chọn quan Huyen");
        }
        
        String xa = (String) cmbXa.getSelectedItem();
        if(xa.trim().isEmpty() || xa== null) {
        	throw new Exception("Chưa chọn Thị Xã");
        }
        
        String soDienThoai = txtSoDienThoai.getText();
        if(soDienThoai.isEmpty()){
            throw new Exception("Số điện thoại không được rỗng");
        }else if(soDienThoai.length()<10) {
        	throw new Exception("Số điện thoại phải dài 11 kí tự");
        }else if(!soDienThoai.matches("[0-9]+")) {
        	throw new Exception("Số điện thoại không hợp lệ");
        }
        
        String diaChiCuThe = txtDiaChi.getText();
        if(diaChiCuThe.trim().isEmpty() ){
            throw new Exception("Dia chi không được rỗng");
        }else if(!diaChiCuThe.matches("^[\\p{L}\\p{Mn}\\p{Mc}\\s\\d]+$")) {
        	throw new Exception("Dia chi không hợp lệ");
        }
        
        if(anhNguoiDung == "") {
        	throw new Exception("Chưa chọn ảnh người dùng");
        }
    }
    
    private void thietLapLaiForm() {
        cmbGioiTinh.setSelectedIndex(0);
        txtHo.setText("Nhập Họ");
        txtTen.setText("Nhập Tên");
        txtCanCuoc.setText("Căn cước");
        dcsNgaySinh.setDate(new Date());
        dcsNgayLam.setDate(new Date());
        txtSoDienThoai.setText("SDT");
        txtDiaChi.setText("Địa Chỉ");
        txtMa.setText("");
        cmbThanhPho.setSelectedIndex(0);
        cmbQuanHuyen.setSelectedIndex(0);
        cmbXa.setSelectedIndex(0);
        cmbChuyenMon.setSelectedIndex(0);
    }
    
    private CongNhan layDuLieuCongNhanTheoMaTuCot(int dongDuocChon) {
		String maCongNhan = (String) tblCongNhan.getValueAt(dongDuocChon, 1);
		return CongNhan_Dao.timCongNhanBangMa(maCongNhan);
	}
    
    private void datDuLieuNhanVienVaoForm(int dongDuocChon) {
		CongNhan nv = layDuLieuCongNhanTheoMaTuCot(dongDuocChon);
		txtMa.setText(nv.getMaNhanSu());
		txtHo.setText(nv.getHo());
		txtTen.setText(nv.getTen());
		//Gioi tính
		GioiTinh gt = nv.getGioiTinh();
		if(gt == GioiTinh.NAM) {
			cmbGioiTinh.setSelectedIndex(0);
		}else if(gt == GioiTinh.NU) {
			cmbGioiTinh.setSelectedIndex(1);
		}else
			cmbGioiTinh.setSelectedIndex(2);
			
		txtSoDienThoai.setText(nv.getSoDienThoai());
		txtCanCuoc.setText(nv.getCCCD());
		dcsNgaySinh.setDate(nv.getNgaySinh());
		dcsNgayLam.setDate(nv.getNgayVaoLam());
		txtDiaChi.setText(nv.getDiaChi().getSoNha());
		anhNguoiDung = nv.getAnh();
		pnHinhNen.setNewBackground(anhNguoiDung);
		
		cmbThanhPho.setSelectedItem(nv.getDiaChi().getTenTinhThanh());
		cmbQuanHuyen.setSelectedItem(nv.getDiaChi().getTenQuanHuyen());
		cmbXa.setSelectedItem(nv.getDiaChi().getTenThiXa());
	}
}
